<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yb.dao.MatchDao">
	<select id="queryMatchesTwoHours" resultType="Match">
		select id,stageId,status,time,homeid,home_grade,visitid,visit_grade,round
		from worldcup_pk_matches

		where time >now() and time &lt; DATE_SUB(NOW(),INTERVAL 2 HOUR) order by time asc limit 1
	</select>
	<select id="queryRownum" resultType="Integer">
		select count(id) from worldcup_pk_matches
		where DATE_FORMAT(time,'%Y-%m-%d')=DATE_FORMAT(#{time},'%Y-%m-%d')
		and time &lt; #{time}
	</select>
	<update id="updateMatch">
		update worldcup_pk_matches
		set status=#{status},home_grade=#{homeGrade},visit_grade=#{visitGrade}
		where id=#{id}
	</update>
	<insert id="insertMatches">
		replace into worldcup_pk_matches(id,stageId,status,time,homeid,home_grade,visitid,visit_grade,round)
		values
		<foreach collection="matchs" item="item" separator=",">
			(#{item.id},#{item.stageId},#{item.status},#{item.time},#{item.homeid},
			#{item.home_grade},#{item.visitid},#{item.visit_grade},#{item.round})
		</foreach>
	</insert>
	<select id="queryMatches" resultType="Match">
		select id,stageId,status,time,homeid,home_grade,visitid,visit_grade,round 
		from worldcup_pk_matches
		
		where time >now() order by time asc limit 4
	</select>
	<select id="queryMatchesToday" resultType="Match">
		select id,stageId,status,time,homeid,home_grade,visitid,visit_grade,round
		from worldcup_pk_matches
		where time > now() and DATE_FORMAT(time,'%Y-%m-%d')= DATE_FORMAT(now(),'%Y-%m-%d') order by time asc limit 4
	</select>
	<select id="queryById" resultType="Match">
		select stageId,time,status,homeid,home_grade,visitid,visit_grade,round from worldcup_pk_matches where id=#{id}
	</select>
	<select id="queryMatchDone" resultType="Match">
		select id,stageId,status,time,homeid,home_grade,visitid,visit_grade
		from worldcup_pk_matches where status=8 order by time desc
	</select>
</mapper>